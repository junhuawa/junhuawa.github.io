---
layout: post
title: "TCPIP Volume 1"
date: 2017-04-24
category: "TCPIP" 
tags: [TCPIP]
---
### Part 3 IP Protocol

IP
是TCP/IP协议族中最为核心的协议。所有的TCP，UDP，ICMP及IGMP数据都以IP数据报格式传输。

不可靠(unreliable): 它不能保证IP数据报能成功地到达目的地。
无连接(connectionless):
IP并不维护任何关于后续数据报的状态信息，每个数据报的处理是相互独立的。

网络字节序: 大端字节序(big endian),
TCP/IP首部中所有的二进制整数在网络中传输时都要求以这种次序。


TTL(time-to-live)
生存时间字段设置了数据报可以经过的最多路由器数。它指定了数据报的生存时间。TTL的初始值由源主机设置(通常为32
or 64), 一旦经过一个处理它的路由器，它的值就 -1.
当该字段的值为0时，数据报就被丢弃，并发送ICMP报文通知源主机.

主机和路由器的本质区别在于主机从不把数据从一个接口转发到另一个接口，而路由器则要转发数据报。

IP路由选择时逐跳的(hop-by-hop)进行的.
IP并不知道到达任何目的的完整路径（当然，除了那些与主机直接相连的目的）。所有的IP路由选择只为数据报传输提供下一站路由器的IP地址。
它假定下一站路由器比发送数据报的主机更接近目的，而且下一站路由器与该主机是直接相连的。 


为一个网络指定一个路由器，而不必为每个主机指定一个路由器，这是IP路由选择机制的另一个基本特性。这样可以极大的缩小路由表的规模，比如Internet上的路由器只有几千个表目，而不会是超过100万个表目。

子网对外部路由器来说隐藏了内部网络组织(一个校园网或公司内部)的细节。

在做路由选择时，数据报中的目的IP地址始终不发生任何变化，所有的路由选择决策都是基于这个目的IP地址；每个链路层可能具有不同的数据帧首部，而且链路层的目的地地址（如果有的话）始终指的是下一站的链路层地址。 

在进行路由选择决策时，主机和路由器都使用路由表。在表中有3种类型的路由：特定主机型，特定网络型和默认路由型。路由表中的表目具有一定的优先级。在选择路由时，主机路由优先于网络路由，最后在没有其他可选路由存在时才选择默认路由。 
